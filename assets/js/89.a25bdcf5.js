(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{672:function(s,n,t){"use strict";t.r(n);var e=t(17),a=Object(e.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("对于现在的项目来说，Eslint 基本上就是项目的标配之一。但有一点比较麻烦的就是，每次新建一个工程的时候都要安装一堆的依赖，然后再配置 "),t("code",[s._v(".eslintrc")]),s._v(" 这类配置文件。直接用开源的某个插件可能配置又不是都满足需求，最后还是配置出来一个自己顺手的配置项，然后新项目又要重复再来一遍操作。")]),s._v(" "),t("p",[s._v("很明显上述操作是极其繁琐的，Eslint 提供了一个叫 "),t("a",{attrs:{href:"https://cn.eslint.org/docs/developer-guide/shareable-configs",target:"_blank",rel:"noopener noreferrer"}},[s._v("Shareable Configs"),t("OutboundLink")],1),s._v(" 的功能用来共享的 Eslint 配置信息，只要把某份配置好的配置信息做成一个 npm 模块就可以共享给其他人或者其他项目中下载使用这些配置。")]),s._v(" "),t("h2",{attrs:{id:"创建配置模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建配置模块"}},[s._v("#")]),s._v(" 创建配置模块")]),s._v(" "),t("p",[s._v("既然配置模块是一个常规的 npm 模块，那就依照 "),t("a",{attrs:{href:"https://docs.npmjs.com/getting-started/creating-node-modules",target:"_blank",rel:"noopener noreferrer"}},[s._v("创建一个 Node.js 模块"),t("OutboundLink")],1),s._v(" 的步骤新建一个 npm 模块，模块名以 "),t("code",[s._v("eslint-config-")]),s._v(" 开头，或者是 "),t("code",[s._v("@scope/eslint-config")]),s._v(" 为前缀的模块名，比如 "),t("code",[s._v("eslint-config-myconfig")]),s._v(" 或者 "),t("code",[s._v("@scope/eslint-config")]),s._v(" 或 "),t("code",[s._v("@scope/eslint-config-myconfig")]),s._v("。")]),s._v(" "),t("p",[s._v("后续都是以 "),t("a",{attrs:{href:"https://www.npmjs.com/package/@fineorg/eslint-config-react",target:"_blank",rel:"noopener noreferrer"}},[s._v("@fineorg/eslint-config-react"),t("OutboundLink")],1),s._v(" 的实现为例进行说明。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" eslint-config-react\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" eslint-config-react\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init --scope"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("@fineorg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("创建一个index.js文件，export一个Eslint的配置项。")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("semi")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"always"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("文件中的配置项就和平时在"),t("code",[s._v(".eslint.js")]),s._v("配置文件中是一样的，引入plugins以及定义规则等都是支持的。")]),s._v(" "),t("h2",{attrs:{id:"使用配置模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用配置模块"}},[s._v("#")]),s._v(" 使用配置模块")]),s._v(" "),t("p",[s._v("为了确保config模块能够正常工作，需要在package.json中用 peerDependencies 字段声明依赖的 ESLint，推荐使用 “>=” 范围语法，即最低要求的 eslint 版本，声明该依赖以向后兼容。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"peerDependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"eslint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^8.0.0"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("配置在设置完成后，先在本地试一下配置是否生效，看一下配置的效果。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在配置模块的目录下执行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把当前模块链接到全局中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("模块发布后新建一个测试工程，然后在工程中安装一下看看是否生效。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个测试工程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm 6.x")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" create vite@latest my-vue-app --template vue\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm 7+, extra double-dash is needed:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" create vite@latest my-vue-app -- --template vue\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在测试工程安装")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 软链接到 node_modules 中，依赖不会提升到顶层")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" @fineorg/eslint-config-react\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会像真正安装一样把依赖提到顶层")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --install-links只有在以本地文件安装的时候才有用，如果直接以包名安装会从远端仓库找")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/eslint-config-react --install-links\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("执行上述install之后会在package.json中添加依赖")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@fineorg/eslint-config-react"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file:../eslint-config-react"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("在测试工程eslint配置文件中使用config，就像引用网络上开源的其他config一样使用了，修改配置文件.eslintrc.json为")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"extends"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@fineorg/eslint-config-react"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("如果配置模块可用且准备共享就可以发布到npm上了，建议使用"),t("code",[s._v("eslint")]),s._v("和"),t("code",[s._v("eslintconfig")]),s._v("关键字方便其他人很容易的找到发布的模块。")]),s._v(" "),t("h2",{attrs:{id:"多模块共享"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多模块共享"}},[s._v("#")]),s._v(" 多模块共享")]),s._v(" "),t("p",[s._v("一个配置模块还可以共享出不同的配置，使用的时候可以选择不同的配置，比如"),t("code",[s._v("eslint:recommended")]),s._v("或"),t("code",[s._v("eslint:all")]),s._v("这种。")]),s._v(" "),t("p",[s._v("最简单的实现方式就是使用不同的文件进行导出，比如在根目录下新建一个"),t("code",[s._v("my-special-config.js")]),s._v("文件并且到一个eslint的配置，可以通过如下方式访问")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"extends"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myconfig/my-special-config"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("除了可以使用 "),t("a",{attrs:{href:"https://cn.eslint.org/docs/developer-guide/shareable-configs",target:"_blank",rel:"noopener noreferrer"}},[s._v("Shareable Configs"),t("OutboundLink")],1),s._v(" 来共享的配置之外，还可以使用 "),t("a",{attrs:{href:"https://cn.eslint.org/docs/developer-guide/working-with-plugins#configs-in-plugins",target:"_blank",rel:"noopener noreferrer"}},[s._v("Configs in Plugins"),t("OutboundLink")],1),s._v(" 达到相同的目的，不过这就属于 Eslint 的 Plugin 了。")])])}),[],!1,null,null,null);n.default=a.exports}}]);