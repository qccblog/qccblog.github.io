(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{656:function(s,t,a){"use strict";a.r(t);var n=a(17),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("正常情况下直接从公网中访问不在同一个局域网内的设备是比较麻烦的，特别是现在运营商因为 IP 地址短缺也很难分配公网 IP 地址。如果想要远程访问这些设备一般来说要通过一些转发或者 P2P 组网软件的帮助。")]),s._v(" "),a("h2",{attrs:{id:"常用方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用方式"}},[s._v("#")]),s._v(" 常用方式")]),s._v(" "),a("ul",[a("li",[s._v("使用 TeamViewer 进行远程。可以直接远程桌面，不过正式版经常提醒购买或者有时长限制（ps：限制越来越多了）。")]),s._v(" "),a("li",[s._v("使用向日葵远程，免费版本网络感人，体验不佳，用起来一卡一卡的。")]),s._v(" "),a("li",[s._v("使用 ngrok 或 frp 这类工具进行内网穿透，可以自己搭建需要公网 ip，也可以使用服务商提供的免费版或付费版服务。")])]),s._v(" "),a("h2",{attrs:{id:"frp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frp"}},[s._v("#")]),s._v(" FRP")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/fatedier/frp",target:"_blank",rel:"noopener noreferrer"}},[s._v("FRP"),a("OutboundLink")],1),s._v(" 全名：Fast Reverse Proxy。FRP 是一个使用 Go 语言开发的高性能的反向代理应用，简单配置后就可以进行内网穿透，对外网提供服务。FRP 支持 TCP、UDP、HTTP、HTTPS 等协议类型，并且支持 Web 服务根据域名进行路由转发。FRP 由一个 server 端（一般是有公网 IP 的服务器），一个 client 端（一般是在内网需要被访问的机器）组成。")]),s._v(" "),a("h3",{attrs:{id:"下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[s._v("#")]),s._v(" 下载")]),s._v(" "),a("p",[s._v("FRP 不需要进行安装，只需要从 GitHub 上下载之后解压配置之后就可以使用。下载地址为 "),a("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/fatedier/frp/releases"),a("OutboundLink")],1),s._v("，点进去会发现有很多不同版本不同系统可以进行下载，当前最新版本是 v0.32.0，一般选择最新版本下载即可。")]),s._v(" "),a("p",[s._v("对于 Windows 操作系统只要选择对应 Windows 版本即可，对于 Linux 可以先通过 "),a("code",[s._v("cat /proc/version")]),s._v(" 或 "),a("code",[s._v("arch")]),s._v(" 查看一下处理器架构，根据架构下载不同版本的 FRP。")]),s._v(" "),a("p",[s._v("下面以 amd64 版本为例：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/fatedier/frp/releases/download/v0.32.0/frp_0.32.0_linux_amd64.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf frp_0.32.0_linux_amd64.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件夹改个名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -r frp_0.32.0_linux_amd64 frp\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" frp\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看目录下有哪些文件")]),s._v("\ntree\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("可以看到文件并不是很多")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- LICENSE\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- frpc    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端可执行二进制文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- frpc.ini    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端使用的配置文件，包含最简配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- frpc_full.ini   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 包含全部配置项的客户端配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- frps    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务端可执行二进制文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- frps.ini "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务端使用的配置文件，包含最简配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- frps_full.ini   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 包含全部配置项的服务端配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-- systemd "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用于将frpc和frps添加为服务的配置，linux下使用systemd作为守护程序、mac os使用launchd作为守护程序")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- frpc.service\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- frpc@.service\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- frps.service\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-- frps@.service\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" directory, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" files\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"server-端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-端"}},[s._v("#")]),s._v(" server 端")]),s._v(" "),a("p",[s._v("启动 server 端的过程很简单，只要执行 frps 即可。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接启动")]),s._v("\n./frps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出以下内容就启动成功了")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("service.go:157"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" frps tcp listen on "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:7000\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root.go:209"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" start frps success\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("默认配置往往不能满足我们的全部需求，这时候就要通过改配置文件来修改配置以满足需求。")]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("frps_full.ini")]),s._v(" 可以看到有很多配置，稍微列一下常用的一些配置：")]),s._v(" "),a("ul",[a("li",[s._v("bind_port：表示用 client 端和 server 端连接的端口，这个端口号我们之后在配置 client 端的时候要用到。")]),s._v(" "),a("li",[s._v("dashboard_port：是 server 端仪表板的端口，若使用 7500 端口，在配置完成服务启动后可以通过浏览器访问 x.x.x.x: 7500 （其中 x.x.x.x 为 server 端的 IP）查看 frp 服务运行信息。")]),s._v(" "),a("li",[s._v("token：是用于 client 端和 server 端连接的口令，为了防止恶意连接最好配置。")]),s._v(" "),a("li",[s._v("dashboard_user、dashboard_pwd：表示打开仪表板页面登录的用户名和密码，自行设置即可。")]),s._v(" "),a("li",[s._v("vhost_http_port、vhost_https_port：用于反向代理 web 服务时使用。")])]),s._v(" "),a("h3",{attrs:{id:"client-端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#client-端"}},[s._v("#")]),s._v(" client 端")]),s._v(" "),a("p",[s._v("启动 client 端需要稍微修改一下 frpc.ini 文件来连接 server 端。")]),s._v(" "),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑配置文件")]),s._v("\nvi frpc.ini\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("common")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_addr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("7000")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("ssh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("tcp")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_ip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("22")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("remote_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("6000")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("其中 common 字段是用来连接服务端的设置：")]),s._v(" "),a("ul",[a("li",[s._v("server_addr：之前启动的服务端 IP 地址")]),s._v(" "),a("li",[s._v("server_port：服务端的端口，填入 frps.ini 中设置的端口号即可，默认值是 7000")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动client")]),s._v("\n./frpc -c ./frpc.ini\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"使用实战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用实战"}},[s._v("#")]),s._v(" 使用实战")]),s._v(" "),a("p",[s._v("结合几个常用场景给出实际使用的例子，这边假定 server 端有一个公网 ip： 114.114.114.114。")]),s._v(" "),a("h4",{attrs:{id:"ssh-访问服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh-访问服务器"}},[s._v("#")]),s._v(" ssh 访问服务器")]),s._v(" "),a("p",[s._v("在之前的 frpc.ini 配置文件中有关于 ssh 的一段配置，两边都启动成功之后就可以连接到 client 端的服务器了，使用上和直接连接到 client 没有区别。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v(" root@114.114.114.114\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("通过 ssh 连接的时候通过-p 指定端口为 client 中设置的 remote_port，用户和密码是 client 端的，ip 地址是 server 端的。")]),s._v(" "),a("h4",{attrs:{id:"通过自定义域名访问部署于内网的-web-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过自定义域名访问部署于内网的-web-服务"}},[s._v("#")]),s._v(" 通过自定义域名访问部署于内网的 Web 服务")]),s._v(" "),a("p",[s._v("有时需要在公有网络通过域名访问我们在本地环境搭建的 Web 服务，但是由于本地环境机器并没有公网 IP，无法将域名直接解析到本地的机器。通过 FRP 就可以很容易实现这一功能，这里以 HTTP 服务为例：首先修改 FRP 服务端配置文件，通过 "),a("code",[s._v("vhost_http_port")]),s._v(" 参数来设置 HTTP 访问端口，这里将 HTTP 访问端口设为 8080。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改server配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" frps.ini\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbind_port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\ndashboard_port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7500")]),s._v("\nvhost_http_port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 FRP 服务端")]),s._v("\n./frps -c ./frps.ini\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/03/23 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":34:41 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("service.go:157"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" frps tcp listen on "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:7000\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/03/23 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":34:41 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("service.go:199"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" http "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" listen on "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8080\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/03/23 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":34:41 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("service.go:273"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Dashboard listen on "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:7500\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/03/23 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":34:41 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root.go:209"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" start frps success\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改client配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" frpc.ini\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新增配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# local_port和custom_domains参数来设置本地机器上Web服务对应的端口和自定义的域名或ip")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http\nlocal_port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\ncustom_domains "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("114.114")]),s._v(".114.114\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动FRP客户端")]),s._v("\n./frpc -c ./frpc.ini\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/03/24 03:36:25 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("service.go:257"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ecc900e57998dac8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" login to server success, get run "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ecc900e57998dac8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", server udp port "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/03/24 03:36:25 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("proxy_manager.go:144"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ecc900e57998dac8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" proxy added: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ssh web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/03/24 03:36:25 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("control.go:179"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ecc900e57998dac8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ssh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" start proxy success\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/03/24 03:36:25 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("control.go:179"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ecc900e57998dac8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" start proxy success\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])]),a("p",[s._v("这边除了配置了 http 访问 web 服务，还配置了 dashboard 来查看当前运行的信息。https 服务配置方法类似，只需将 vhost_http_port 替换为 vhost_https_port，type 设置为 https 即可。")]),s._v(" "),a("p",[s._v("访问 "),a("a",{attrs:{href:"http://114.114.114.114:7500",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://114.114.114.114:7500"),a("OutboundLink")],1),s._v(" 就会出来一个 frp 的 dashboard 面板，界面上比较简洁，但是该有的信息都比较清楚的展示了出来。\n"),a("img",{attrs:{src:"https://i.loli.net/2020/03/30/784WHLDgzf3Abyp.png",alt:"image.png"}})]),s._v(" "),a("p",[s._v("访问 "),a("a",{attrs:{href:"http://114.114.114.114:8080",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://114.114.114.114:8080"),a("OutboundLink")],1),s._v(" 正常情况下下就会转发到 client 端机器的 80 端口的 web 服务，如果 client 没有启动或者配置出错就会显示一个报错的页面。\n"),a("img",{attrs:{src:"https://i.loli.net/2020/03/30/cqMtWQHgL8DdjYo.png",alt:"image.png"}})]),s._v(" "),a("p",[s._v("FRP 除此之外还有很多其他的应用场景，可以参考 "),a("a",{attrs:{href:"https://github.com/fatedier/frp/blob/master/README_zh.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("中文文档"),a("OutboundLink")],1),s._v(" 自行摸索发现自己需要的服务。")]),s._v(" "),a("h4",{attrs:{id:"window-远程桌面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#window-远程桌面"}},[s._v("#")]),s._v(" window 远程桌面")]),s._v(" "),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("yc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("tcp")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_ip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("3389")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("remote_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("3399")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 被远程客户端")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("rdp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("stcp")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("sk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("abcdefg")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_ip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("3389")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进行远程客户端")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("rdp_visitor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("stcp")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("role")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("visitor")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_name")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("rdp")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("sk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("abcdefg")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("bind_addr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("bind_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("6000")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h4",{attrs:{id:"通过-frpc-所在机器访问外网"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过-frpc-所在机器访问外网"}},[s._v("#")]),s._v(" 通过 frpc 所在机器访问外网")]),s._v(" "),a("p",[s._v("HTTP 代理插件，用于将内网机器作为 HTTP 代理暴露给其他服务，可以通过此代理访问到此内网机器能够访问到的其他服务。")]),s._v(" "),a("p",[s._v("frps 的部署步骤同上。")]),s._v(" "),a("p",[s._v("启动 frpc，启用 http_proxy 或 socks5 插件(plugin 换为 socks5，然后修改参数名称即可)， 配置如下：")]),s._v(" "),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frpc.ini")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("common")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_addr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("x.x.x.x")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("7000")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("http_proxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("tcp")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("remote_port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("6000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("plugin")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("http_proxy")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("plugin_http_user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("abc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("plugin_http_passwd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("abc")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("浏览器设置 http 或 socks5 代理地址为 x.x.x.x: 6000，即可通过 frpc 机器的网络访问互联网。")]),s._v(" "),a("p",[s._v("更多功能和插件可以参考 "),a("a",{attrs:{href:"https://gofrp.org/docs/features/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"扩展-将服务端-frps-添加为-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#扩展-将服务端-frps-添加为-service"}},[s._v("#")]),s._v(" 扩展：将服务端 frps 添加为 service")]),s._v(" "),a("p",[s._v("通过在终端直接启动 frps 的方式，会占用终端，并且停止和重启等管理操作也不方便。为了方便管理 frps 的启动、停止、重启和开机自启，我们需要将 frps 添加为系统 service，通过 systemd 守护程序来管理。")]),s._v(" "),a("p",[s._v("在 frp 目录里的 systemd 目录下，已经为我们准备好了添加 service 的模板：")]),s._v(" "),a("ul",[a("li",[s._v("frpc.service —— client 端使用此模板")]),s._v(" "),a("li",[s._v("frpc@.service")]),s._v(" "),a("li",[s._v("frps.service —— server 端使用此模板")]),s._v(" "),a("li",[s._v("frps@.service")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入目录frp/systemd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" frp/systemd\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑frps.service")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" frps.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务运行配置项ExecStart=/usr/bin/frps -c /etc/frp/frps.ini和直接启动类似，需要修改为合适的地址")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 复制frps可执行文件到/usr/bin目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" frp/frps /usr/bin\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 复制frps.ini到/etc/frp目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" frp/frps.ini /etc/frp\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 复制frps.service到/etc/systemd/system目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" frp/systemd/frps.service /etc/systemd/system\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动frps")]),s._v("\nsystemctl start frps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止frps")]),s._v("\nsystemctl stop frps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启frps")]),s._v("\nsystemctl restart frps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看frps状态")]),s._v("\nsystemctl status frps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开机启动frps")]),s._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" frps\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("h3",{attrs:{id:"通过-docker-部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过-docker-部署"}},[s._v("#")]),s._v(" 通过 docker 部署")]),s._v(" "),a("p",[s._v("frps 的部署可以说已经非常简便了，不过基于各种原因还是可以通过 docker 进行快速部署的，本地一份配置文件加上开放的端口即可。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v(":7000 -v /home/frp/frps.ini:/etc/frps.ini -d frankqcc/frps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -net设置为host可以不用配置端口映射")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试的时候可以方便不用不停切换端口，正式环境不建议这么使用")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --rm -d --net"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("host --name frps -v /home/fr/frp/frps.ini:/etc/frps.ini frankqcc/frps\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("如果需要修改配置文件就要把本地的配置文件映射到 docker 中，使用上和直接部署没有任何区别。client 端同理也可以进行 docker 部署，不过个人觉得实际使用过程中直接使用 frpc 镜像的场景不多。")]),s._v(" "),a("h2",{attrs:{id:"参考文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[s._v("#")]),s._v(" 参考文档")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/cdc446e51675",target:"_blank",rel:"noopener noreferrer"}},[s._v("可以实现内网穿透的几款工具"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://sspai.com/post/52523",target:"_blank",rel:"noopener noreferrer"}},[s._v("使用 frp 进行内网穿透"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000018990329",target:"_blank",rel:"noopener noreferrer"}},[s._v("使用 frp 搭建内网穿透"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://gofrp.org/docs/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方中文文档"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);