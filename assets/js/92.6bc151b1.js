(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{675:function(s,t,a){"use strict";a.r(t);var e=a(17),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("今天看到一个介绍在旧安卓手机上搭建 Web 服务器的文章，其中提到的 Termux 感觉挺有意思的，去尝试一把感觉还可以的。")]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://termux.dev/en/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Termux"),a("OutboundLink")],1),s._v(" 是一款 Android 终端模拟器和 Linux 环境运用程序，无需 root，安装后无需额外设置即可直接运行。自动安装最小的基本系统，使用 APT 包管理工具。")])]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("p",[s._v("如果是可以访问应用商店的手机可以直接从应用商店下载安装。如果不能访问也可以从 "),a("a",{attrs:{href:"https://termux.dev/en/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),a("OutboundLink")],1),s._v(" 提供的地址下载下载安装，直接访问 "),a("a",{attrs:{href:"https://github.com/termux/termux-app#github",target:"_blank",rel:"noopener noreferrer"}},[s._v("Github"),a("OutboundLink")],1),s._v(" 或 "),a("a",{attrs:{href:"https://f-droid.org/en/packages/com.termux/",target:"_blank",rel:"noopener noreferrer"}},[s._v("F-Droid"),a("OutboundLink")],1),s._v(" 进行下载。")]),s._v(" "),a("p",[a("img",{staticClass:"medium-zoom-image",staticStyle:{height:"220px"},attrs:{src:"https://i.finecat.site/img/2022/07/176c14ac6b45bf7bf0b8f04e06e7a342.png",alt:"下载 APK"}})]),s._v(" "),a("p",[s._v("上图为在 F-Droid 下载的界面，注意不要下错了，具体下载的地方还会有版本、安卓版本以及权限的描述。下载完成后直接安装就行，默认情况下软件基本上不需要什么权限。")]),s._v(" "),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),a("p",[s._v("打开 Termux 以后，就是一个全屏的命令行界面，底部键盘有些常用的快捷键。试着输入了几个命令发现基本上都是可以的，手机也支持一些会话管理或者快捷操作，不过在手机上操作不太方便就没有过多使用。后面的都是配置 ssh 服务器后远程访问使用的。")]),s._v(" "),a("p",[a("img",{staticClass:"medium-zoom-image",staticStyle:{height:"220px"},attrs:{src:"https://i.finecat.site/img/2022/07/4a74a98663ef9113f81752bc93a5ce2a.png",alt:"安装后打开"}})]),s._v(" "),a("h3",{attrs:{id:"更换国内源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更换国内源"}},[s._v("#")]),s._v(" 更换国内源")]),s._v(" "),a("p",[s._v("使用默认源的有些情况下网络状况会不太好，建议换成国内的镜像在更新和安装软件的时候更方便。")]),s._v(" "),a("p",[s._v("在较新版的 Termux 中，官方提供了图形界面（TUI）来半自动替换镜像，推荐使用该种方式以规避其他风险。 在 Termux 中执行命令 "),a("code",[s._v("termux-change-repo")]),s._v(" 会出现一个图形界面。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.finecat.site/img/2022/07/b9ad6ed834398011b6304196d7be544b.png",alt:"更换国内源"}})]),s._v(" "),a("p",[s._v("在出现的界面上进行操作，第一步使用空格选择需要更换的仓库，之后在第二步选择 TUNA/BFSU 镜像源。确认无误后回车，镜像源会自动选择最优的线路完成更换。")]),s._v(" "),a("p",[s._v("如果不方便或者不支持使用图形界面，也可以使用命令行或者编辑 source 文件进行替换，需要注意的是请使用内置或安装在 Termux 里的文本编辑器，例如 vi / vim / nano 等，不要使用 RE 管理器等其他具有 ROOT 权限的外部 APP 来修改 Termux 的文件。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令行替换")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s@^\\(deb.*stable main\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/apt/termux-main stable main@'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v("/etc/apt/sources.list\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" upgrade\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑 $PREFIX/etc/apt/sources.list 修改为如下内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The termux repository mirror from TUNA:")]),s._v("\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/apt/termux-main stable main\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("上述操作的镜像仅适用于 Android 7.0 (API 24) 及以上版本，旧版本系统使用本镜像可能导致程序错误。")]),s._v(" "),a("h3",{attrs:{id:"安装-ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-ssh"}},[s._v("#")]),s._v(" 安装 ssh")]),s._v(" "),a("p",[s._v("和在普通 Linux 服务器上操作类似也是安装 openssh 配置后访问，需要注意的是，默认情况下端口是 8022 而不是 22。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装OpenSSH")]),s._v("\n$ pkg "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openssh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行SSH Server，默认端口8022")]),s._v("\n$ sshd\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前用户")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置密码")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获得 IP")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端连接ssh服务器")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" user@xxx.xxx.xxx.xxx -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8022")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"安装软件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装软件"}},[s._v("#")]),s._v(" 安装软件")]),s._v(" "),a("p",[s._v("部分工具可以看需求进行安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新")]),s._v("\n$ pkg update\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\n$ pkg "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" nodejs-lts\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"管理员"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#管理员"}},[s._v("#")]),s._v(" 管理员")]),s._v(" "),a("h4",{attrs:{id:"虚拟管理员-未-root"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#虚拟管理员-未-root"}},[s._v("#")]),s._v(" 虚拟管理员 (未 root)")]),s._v(" "),a("p",[s._v("使用 "),a("a",{attrs:{href:"https://wiki.termux.com/wiki/PRoot",target:"_blank",rel:"noopener noreferrer"}},[s._v("PRoot"),a("OutboundLink")],1),s._v(" 可以为手机没有 root 的用户来模拟一个 root 的环境，主要是对 Linux 文件系统进行的一个模拟，比如开启前文件路径是 "),a("code",[s._v("/data/data/com.termux/file/home")]),s._v("，开启后对应的文件路径为 "),a("code",[s._v("/home")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ pkg "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" proot\n\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动命令，进入proot环境")]),s._v("\n$ termux-chroot\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推出proot环境")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("需要注意的是这个并不是真正的 root，所以如果需要真正 root 权限的操作还是无法执行的。")]),s._v(" "),a("h4",{attrs:{id:"真实管理员-已-root-没有实际使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#真实管理员-已-root-没有实际使用"}},[s._v("#")]),s._v(" 真实管理员 (已 root)（没有实际使用）")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/buzzkillhardball/tsu-for-termux",target:"_blank",rel:"noopener noreferrer"}},[s._v("tsu"),a("OutboundLink")],1),s._v(" 是 su 的 Termux 版本，是一个真正的 root 权限，用来在 Termux 上替代 su 的工具。由于具有 root 权限，使用的时候需要注意，而且还可以进入手机的任意一个目录进行操作。类似的还有 "),a("a",{attrs:{href:"https://en.m.wikipedia.org/wiki/Chroot",target:"_blank",rel:"noopener noreferrer"}},[s._v("Chroot"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ pkg "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" tsu\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入root环境")]),s._v("\n$ tsu\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("本文没有对这种场景进行实际使用，建议各位也慎重考虑是否需要使用")]),s._v("。一般的操作无需 root 权限都可以完成，除非知道自己要 root 做什么，否则 "),a("strong",[s._v("不建议使用 root")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"安装-linux-发行版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-linux-发行版"}},[s._v("#")]),s._v(" 安装 Linux 发行版")]),s._v(" "),a("p",[s._v("Termux 提供了一个叫 "),a("a",{attrs:{href:"https://github.com/termux/proot-distro",target:"_blank",rel:"noopener noreferrer"}},[s._v("proot-distro"),a("OutboundLink")],1),s._v(" 的包，负责管理 Termux 中的 Linux 发行版。")]),s._v(" "),a("blockquote",[a("p",[s._v("PRoot Distro 不是虚拟机，也不是传统的 chroot。它与您的 Android 系统共享相同的内核，因此甚至不要尝试通过包管理器对其进行更新 - 这将不起作用。")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装proot-distro")]),s._v("\n$ pkg "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" proot-distro\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看支持的发行版")]),s._v("\n$ proot-distro list\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装某个发行版")]),s._v("\n$ proot-distro "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("alias"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接连接到发行版")]),s._v("\n$ proot-distro login "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("alias"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 卸载")]),s._v("\n$ proot-distro remove "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("alias"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.finecat.site/img/2022/07/ff97e682161acb39d96848226233b6a4.png",alt:"安装 Ubuntu 的过程"}})]),s._v(" "),a("p",[s._v("进入Linux发行版之后就是一个近乎全功能的系统了，具体部分限制可以参考 "),a("a",{attrs:{href:"https://github.com/termux/proot-distro",target:"_blank",rel:"noopener noreferrer"}},[s._v("proot-distro"),a("OutboundLink")],1),s._v(" 的描述。")]),s._v(" "),a("p",[s._v("除了使用官方提供的 proot-distro 进行安装外，也可以使用社区的"),a("a",{attrs:{href:"https://wiki.termux.com/wiki/PRoot#:~:text=distro%20login%20debian-,Community%20scripts,-The%20ways%20of",target:"_blank",rel:"noopener noreferrer"}},[s._v("第三方脚本"),a("OutboundLink")],1),s._v(" 进行安装，需要自行鉴别其中的利弊。")]),s._v(" "),a("h3",{attrs:{id:"termux-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#termux-api"}},[s._v("#")]),s._v(" Termux:API")]),s._v(" "),a("p",[s._v("Termux:API 提供一些 API 让 Termux 可以调用手机原生的一些功能的插件，支持比如查看电池状态、打电话等功能。\n需要先从 "),a("a",{attrs:{href:"https://f-droid.org/packages/com.termux.api/",target:"_blank",rel:"noopener noreferrer"}},[s._v("F-Droid"),a("OutboundLink")],1),s._v(" 或应用商店下载 Termux: API 用来运行提供的 API，安装完成之后不会显示在手机桌面上，需要在 App 列表里面找到。注意：Termux 和其插件要么都从 F-Droid 下载，要么都从应用商店下载，不能混用。\n然后在 Termux 中安装 "),a("code",[s._v("pkg install termux-api")]),s._v("，安装完成后就可以使用，完整支持的 API 可以参考 "),a("a",{attrs:{href:"https://wiki.termux.com/wiki/Termux:API#:~:text=issue%20334.-,Current%20API%20implementations,-termux%2Dbattery%2Dstatus",target:"_blank",rel:"noopener noreferrer"}},[s._v("文档"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ termux-battery-status "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取电池信息")]),s._v("\n$ termux-camera-info "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取相机信息")]),s._v("\n$ termux-clipboard-get "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取剪切板数据")]),s._v("\n$ termux-clipboard-set Hello "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置新的剪切板数据")]),s._v("\n$ termux-contact-list "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取通讯录列表")]),s._v("\n$ termux-sms-inbox "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取短信内容列表")]),s._v("\n$ termux-sms-send "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送短信")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 多号码群发")]),s._v("\n$ termux-sms-send -n number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" recipient number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - separate multiple numbers by commas \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 举例")]),s._v("\n$ termux-sms-send -n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10086")]),s._v(" ceshi\n$ termux-telephony-call "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拨打电话")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 举例")]),s._v("\n$ termux-telephony-call "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10086")]),s._v("\n$ termux-wifi-connectioninfo "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取当前wifi链接信息")]),s._v("\n$ termux-wifi-scaninfo "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取最近一次wifi扫描信息")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.finecat.site/img/2022/07/74cd9825356cae1412061bf2a09e2d48.png",alt:"API 执行结果"}})]),s._v(" "),a("p",[s._v("试了几个 api，发现效果都很不错，如果是没有给权限的会提示权限问题，手机上会弹出需要权限的提示。")]),s._v(" "),a("h2",{attrs:{id:"备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#备份"}},[s._v("#")]),s._v(" 备份")]),s._v(" "),a("p",[s._v("一般情况下搞这个是为了折腾一番，那很可能就在过程中直接搞崩了，所以我们在使用虚拟机的时候经常会用快照或者备份一份来防止无法还原的问题，Termux 官方也提供了 "),a("a",{attrs:{href:"https://wiki.termux.com/wiki/Backing_up_Termux",target:"_blank",rel:"noopener noreferrer"}},[s._v("备份的方法"),a("OutboundLink")],1),s._v("，执行后续操作之前 "),a("strong",[s._v("要了解每步的作用")]),s._v("，如果误操作可能会造成 "),a("strong",[s._v("数据的丢失")]),s._v("。具体可以参考官方的 "),a("a",{attrs:{href:"https://wiki.termux.com/wiki/Backing_up_Termux",target:"_blank",rel:"noopener noreferrer"}},[s._v("Backing up Termux"),a("OutboundLink")],1),s._v("，下面简单描述一下大致过程。")]),s._v(" "),a("h3",{attrs:{id:"手动备份恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手动备份恢复"}},[s._v("#")]),s._v(" 手动备份恢复")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保授予了存储权限")]),s._v("\n$ termux-setup-storage\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份文件")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zcf /sdcard/termux-backup.tar.gz -C /data/data/com.termux/files ./home ./usr\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("在没有滥用 root 的情况下，不会出现权限相关问题，备份会很快就完成（实测需要的时间还是挺长的，可能是手机比较渣渣）。\n"),a("strong",[s._v("警告：")]),s._v(" 不要将备份存储在 Termux 私有目录中。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保授予了存储权限")]),s._v("\n$ termux-setup-storage\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用备份文件覆盖所有内容")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxf /sdcard/termux-backup.tar.gz -C /data/data/com.termux/files --recursive-unlink --preserve-permissions\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启Termux即可生效")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"使用提供的脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用提供的脚本"}},[s._v("#")]),s._v(" 使用提供的脚本")]),s._v(" "),a("p",[s._v("最新版本的 "),a("code",[s._v("termux-tools")]),s._v(" 提供了用于备份和恢复的脚本，详细信息参考 "),a("a",{attrs:{href:"https://wiki.termux.com/wiki/Backing_up_Termux#:~:text=open%20it%20again.-,Using%20supplied%20scripts,-The%20latest%20version",target:"_blank",rel:"noopener noreferrer"}},[s._v("Using supplied scripts"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份")]),s._v("\n$ termux-backup /sdcard/backup.tar.xz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复")]),s._v("\n$ termux-restore /sdcard/backup.tar.xz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("执行备份前也需要确保有存储权限。")]),s._v(" "),a("p",[s._v("整个过程玩下来感觉还是挺有意思的，在这个智能手机更新换代很快的时候，很多人手上都会有淘换下来的旧手机在边上吃灰，实际上很多手机的配置都挺不错的，虽然在架构上面对 PC 有天生的劣势，但是顶不住配置比便宜的云服务器要高不少，所以折腾一下还是挺不错的。")])])}),[],!1,null,null,null);t.default=n.exports}}]);