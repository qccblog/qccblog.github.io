(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{622:function(t,s,p){"use strict";p.r(s);var n=p(17),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,p=t._self._c||s;return p("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[p("p",[t._v("在使用python抓取网页内容的时候，经常会遇到一些比较奇葩的内容，如果是直接处理的话不仅麻烦而且稍微有改动就需要重新处理。使用BeautifulSoup处理网页内容之后再进行后续处理就比较简单了。")]),t._v(" "),p("p",[t._v("1.安装BeautifulSoup")]),t._v(" "),p("p",[t._v("我是在Ubuntu16下安装的，直接使用")]),t._v(" "),p("p",[p("code",[t._v("$sudo apt-get update")])]),t._v(" "),p("p",[p("code",[t._v("$sudo apt-get install python-bs4")])]),t._v(" "),p("p",[t._v("如果安装了pip可以使用")]),t._v(" "),p("p",[p("code",[t._v("$ pip install beautifulsoup4")])]),t._v(" "),p("p",[t._v("就可以进行安装了，不同版本的可能名字略微有区别，注意查看。也可以选择使用下载软件然后再进行安装。通过下一步可以检验是否安装成功。")]),t._v(" "),p("p",[t._v("2.使用BeautifulSoup")]),t._v(" "),p("p",[p("code",[t._v("from bs4 import BeautifulSoup")])]),t._v(" "),p("p",[t._v("注意bs4不要写错了，如果写的是BeautifulSoup就可能会报错。")]),t._v(" "),p("p",[t._v("3.简单的使用")]),t._v(" "),p("p",[p("code",[t._v("resp = urllib2.urlopen(url)")])]),t._v(" "),p("p",[p("code",[t._v("soup = BeautifulSoup(resp.read().decode('gbk', 'ignore'), 'lxml')")])]),t._v(" "),p("p",[t._v("在抓取网页的时候我们一般都要考虑编码的问题，不然很容易会出现乱码。这里使用要抓取的网页一样的编码。")]),t._v(" "),p("p",[t._v("简单的使用例子：")]),t._v(" "),p("p",[p("code",[t._v("title =soup.find('h1')")]),t._v("用来获取h1标签和内容")]),t._v(" "),p("p",[p("code",[t._v("title =soup.find('h1', id='Title').string")]),t._v("用来获取id为Title的h1标签的内容")]),t._v(" "),p("p",[t._v("不过如果要存到数据库的话还是需要用str(title)处理，不然不能正确的存到MySQL数据库中")]),t._v(" "),p("p",[p("code",[t._v("soup.title")]),t._v("用来获取title标签")]),t._v(" "),p("p",[p("code",[t._v("soup.find_all('a')")]),t._v("用来获取全部的a标签")]),t._v(" "),p("p",[p("code",[t._v('soup.find("p", {"class" : "title"})')]),t._v("用来获取class为title的p标签")]),t._v(" "),p("p",[t._v("实例：")]),t._v(" "),p("p",[p("code",[t._v('<div class="title" id="title2"><i>1</i>要获取的内容</div>')])]),t._v(" "),p("p",[t._v("获取其中文字的办法：")]),t._v(" "),p("p",[t._v("1.先获取整个div的内容")]),t._v(" "),p("div",{staticClass:"language-python line-numbers-mode"},[p("pre",{pre:!0,attrs:{class:"language-python"}},[p("code",[t._v("title "),p("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" soup"),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("div\ntitle "),p("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" soup"),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),p("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),p("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),p("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),p("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title2"')]),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntitle "),p("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" soup"),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),p("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),p("span",{pre:!0,attrs:{class:"token string"}},[t._v('"class"')]),t._v(" "),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),p("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),p("div",{staticClass:"line-numbers-wrapper"},[p("span",{staticClass:"line-number"},[t._v("1")]),p("br"),p("span",{staticClass:"line-number"},[t._v("2")]),p("br"),p("span",{staticClass:"line-number"},[t._v("3")]),p("br")])]),p("p",[t._v("上述三种办法均可以获取整个div的内容")]),t._v(" "),p("p",[t._v("2.获取i标签的内容")]),t._v(" "),p("p",[p("code",[t._v("i_content = title.i")])]),t._v(" "),p("p",[t._v("3.获取剩余的内容")]),t._v(" "),p("p",[p("code",[t._v("content = i_content.next_sibling.string")])]),t._v(" "),p("p",[t._v("最后一个string使用来转化其中内容的。有以上的一些方法就可以处理绝大部分的问题了")])])}),[],!1,null,null,null);s.default=e.exports}}]);