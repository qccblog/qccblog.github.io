(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{663:function(s,t,a){"use strict";a.r(t);var n=a(17),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("Bit 简化了 UI 组件上的协作过程，维护和同步来自不同项目的独立组件。即使是在工程已经有部分组件的情况下再去使用 Bit 也还是比较方便的。")]),s._v(" "),a("p",[a("strong",[s._v("如果是拉取已经配置好的工程就不需要初始化和修改配置，建议直接看最后一段 "),a("a",{attrs:{href:"#%E6%8B%89%E5%8F%96%E4%BD%BF%E7%94%A8Bit%E7%9A%84%E9%A1%B9%E7%9B%AE"}},[s._v("拉取使用 Bit 的项目")])])]),s._v(" "),a("h2",{attrs:{id:"环境配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境配置"}},[s._v("#")]),s._v(" 环境配置")]),s._v(" "),a("h3",{attrs:{id:"初始化-bit-workspace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化-bit-workspace"}},[s._v("#")]),s._v(" 初始化 Bit Workspace")]),s._v(" "),a("p",[s._v("在 Bit 中是以 workspace 来管理一个项目的，所以第一步先要初始一个 workspace。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装bit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bit的环境变量默认基本上安装不成功，根据提示配置一下")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Linux或Mac执行： export PATH=$HOME/bin:$PATH")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# windows建议手动把 "C:\\Users\\username\\AppData\\Local\\.bvm"添加到环境变量中')]),s._v("\nnpx @teambit/bvm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目根目录下执行")]),s._v("\nbit init --harmony\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖")]),s._v("\nbit "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("Bit 初始化成功之后会自动生成 workspace.jsonc 和.bitmap 两个文件，workspace.jsonc 用来配置 workspace 以及管理组件环境等配置的，.bitmap 主要是存储组件的映射关系不需要手动编辑。还会默认生成一个.bit 的隐藏文件夹（如果初始化之前已经有.git 则在.git 目录下），算是一个本地的组件仓库。")]),s._v(" "),a("h3",{attrs:{id:"修改配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改配置"}},[s._v("#")]),s._v(" 修改配置")]),s._v(" "),a("p",[s._v("workspace.jsonc 中的 "),a("code",[s._v("teambit.workspace/workspace")]),s._v(" 用来控制整个 workspace 的一些基本配置，比如 name 或者默认文件夹等。")]),s._v(" "),a("p",[s._v("workspace.jsonc 中的 "),a("code",[s._v("teambit.dependencies/dependency-resolver")]),s._v(" 用来管理依赖，packageManager 可以选择 pnmp 或则 yarn，官方是建议使用 Bit 来管理依赖，也就是说使用 bit 后安装新的依赖就用 "),a("code",[s._v("bit install")]),s._v(" 安装而不是 npm 或者 yarn 直接安装，当然也有说可以继续"),a("a",{attrs:{href:"https://harmony-docs.bit.dev/building-with-bit/manage-workspace#can-i-use-package-manager-directly",target:"_blank",rel:"noopener noreferrer"}},[s._v("直接安装"),a("OutboundLink")],1),s._v("，但是需要自己处理组件模块的链接问题，更多具体信息请参考"),a("a",{attrs:{href:"https://harmony-docs.bit.dev/aspects/dependency-resolver",target:"_blank",rel:"noopener noreferrer"}},[s._v("文档"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("p",[s._v("workspace.jsonc 中的 "),a("code",[s._v("teambit.workspace/variants")]),s._v(" 用来通过不同的分组层级来设置各种具体的配置，比如环境依赖。可以通过指定的更具体的配置来覆盖通配符的配置，更多信息参考[文档]。(https://harmony-docs.bit.dev/aspects/variants)")]),s._v(" "),a("p",[s._v("配置文件主要是以上三块内容，默认情况下要改的也就是把 variants 里面的环境注释给去掉就行，然后把 packageManager 换成 yarn。")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"packageManager"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"teambit.dependencies/yarn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"*"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"teambit.react/react"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("更多配置可以参考 "),a("a",{attrs:{href:"https://harmony-docs.bit.dev/building-with-bit/manage-workspace",target:"_blank",rel:"noopener noreferrer"}},[s._v("Manage Workspace"),a("OutboundLink")],1),s._v("，目前 harmony 版本的文档感觉还不是很稳定，有可能要重新查找一下。")]),s._v(" "),a("h3",{attrs:{id:"添加-remote"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加-remote"}},[s._v("#")]),s._v(" 添加 remote")]),s._v(" "),a("p",[s._v("remote 可以理解为在服务器上的组件仓库，自托管的 bit.dev，如果只是本地用用可以省略。如果使用官方提供的 bit.dev 直接执行 "),a("code",[s._v("bit login")]),s._v(" 即可。")]),s._v(" "),a("p",[s._v("假定远程地址为 "),a("a",{attrs:{href:"https://bit.demo",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://bit.demo"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加remote")]),s._v("\nbit remote "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" https://bit.demo\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改workspace.jsonc中的defaultScope为remote的scope，这边是bit-scope")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"组件操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件操作"}},[s._v("#")]),s._v(" 组件操作")]),s._v(" "),a("h3",{attrs:{id:"新增组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增组件"}},[s._v("#")]),s._v(" 新增组件")]),s._v(" "),a("p",[s._v("可以使用 "),a("code",[s._v("bit create")]),s._v(" 命令来新建模板")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以react-component为模板在ui中创建一个组件button")]),s._v("\nbit create react-component ui/button\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("关于组件名称需要注意一点")]),s._v("：Bit 使用 CamelCasing 的方式将组件名称传递给模板，但生成的文件结构采用的 kebab-case 模式，说是为了更好的跨操作系统兼容性。")]),s._v(" "),a("p",[s._v("执行 "),a("code",[s._v("bit start")]),s._v(" 可以启动一个 dev 服务器，访问 "),a("a",{attrs:{href:"http://localhost:3000/ui/button",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:3000/ui/button"),a("OutboundLink")],1),s._v(" 可以查看到刚刚新增组件的各种信息。")]),s._v(" "),a("h3",{attrs:{id:"处理已有组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#处理已有组件"}},[s._v("#")]),s._v(" 处理已有组件")]),s._v(" "),a("p",[s._v("对于已经存在的组件要转换成 Bit 组件可以使用 bit add 命令，对于新创建组件建议使用 bit create 命令创建。")]),s._v(" "),a("p",[s._v("直接执行 "),a("code",[s._v("bit add 组件文件夹路径")]),s._v(" 就会自动添加一个组件，不过建议还是自行指定组件的 name 或 namespace（不可同时指定），自动生成的可能不是你想要的。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成name为button的组件")]),s._v("\nbit "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" bit-scope/ui/button\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成name为ui/button的组件")]),s._v("\nbit "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" bit-scope/ui/button -n ui\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ui目录下全都添加为Bit组件")]),s._v("\nbit "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" bit-scope/ui/* -n ui\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("需要注意的是 Bit 组件默认需要 index.[ts|js] 文件作为入口，如果实在不准备用 index 文件，需要在添加的时候指定入口文件 "),a("code",[s._v("bit add bit-scope/ui/button --main main.js")]),s._v("。")]),s._v(" "),a("p",[s._v("每个 Bit 组件实际上都可以作为一个独立的 npm 包，为了保证组件可读性和稳定性，建议每个组件都有以下部分：")]),s._v(" "),a("ul",[a("li",[s._v("*.compositions.tsx 文件作为实例用于单测和文档上显示用")]),s._v(" "),a("li",[s._v("*.docs.mdx 作为组件文档")]),s._v(" "),a("li",[s._v("*.spec.tsx 写单元测试")])]),s._v(" "),a("p",[s._v("使用 bit start 启动 dev 服务器之后，对组件内部文件的改动会 watch 然后更改的，不需要手动执行 compile 之类的操作。")]),s._v(" "),a("h3",{attrs:{id:"使用组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用组件"}},[s._v("#")]),s._v(" 使用组件")]),s._v(" "),a("p",[s._v("不允许通过相对路径来使用组件，只能通过组件的包名来使用组件，这样可以保证后续移动组件位置之类的操作不会影响到使用的地方。bit 在构造组件的过程中会自动添加到 node_modules，所以可以直接以依赖包名的方式引入。")]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" Button "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@bit-scope/ui.button"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"导入导出组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入导出组件"}},[s._v("#")]),s._v(" 导入导出组件")]),s._v(" "),a("p",[s._v("如果只是在本地一个项目使用组件放在 bit 上的必要性也没那么高了，只有把组件发布到远程服务器上才能方便的不同项目之间共享组件。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给全部改动的组件打tag")]),s._v("\nbit tag --all --message "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"first version"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布组件到remote")]),s._v("\nbit "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("访问以下远程服务器看看组件发布成功了没有，如果成功了就能在另外一个项目愉快使用了。先从 remote 导入组件，再引用就行了。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 导入组件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bit import <scope>/<component>")]),s._v("\nbit "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" bit-scope/ui/button\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("如果是同一个工程，其他小伙伴新增了组件，拉取代码之后如果没有正在运行通过 bit start 启动的服务，那么需要处理一下才能使用。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从远端导入")]),s._v("\nbit "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 链接到node_modules中去")]),s._v("\nbit "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译一下，不然会有一些说缺少loader的报错")]),s._v("\nbit compile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"拉取使用-bit-的项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拉取使用-bit-的项目"}},[s._v("#")]),s._v(" 拉取使用 Bit 的项目")]),s._v(" "),a("p",[s._v("如果只是带有 Bit 组件工程的使用者（不上传 bit 组件），那么按下面的配置简单操作一下就可以了。假定远程地址为 "),a("a",{attrs:{href:"https://bit.demo",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://bit.demo"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果没有安装就先安装bit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bit的环境变量默认基本上安装不成功，根据提示配置一下")]),s._v("\nnpx @teambit/bvm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加远程环境")]),s._v("\nbit remote "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" https://bit.demo\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 导入组件")]),s._v("\nbit "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 链接和编译")]),s._v("\nbit "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\nbit compile\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动工程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("看到这么多步骤，感觉有点麻烦？在 package.json 中加上 "),a("code",[s._v('"postinstall": "bit remote add https://bit.demo && bit import && bit link && bit compile",')]),s._v("，然后执行 "),a("code",[s._v("yarn")]),s._v(" 就行了，同时这样也能保证每次安装后处理依赖。")]),s._v(" "),a("p",[s._v("简单用了一段时间之后的感受：Bit 虽好，依赖却坑。")])])}),[],!1,null,null,null);t.default=e.exports}}]);